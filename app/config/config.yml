imports:
    - { resource: security.yml }

framework:
    #esi:             ~
    translator:      { fallback: "%locale%" }
    secret:          "%secret%"
    router:
        resource: "%kernel.root_dir%/config/routing.yml"
        strict_requirements: "%kernel.debug%"
    form:            true
    csrf_protection: true
    validation:      { enable_annotations: true }
    assets:
        version:    "202001151336"
        version_format: '%%s?v=%%s'
        base_urls:  ["%router.request_context.scheme%://%router.request_context.host%"]
        packages:
             sitemaps:
                version:    ""
                base_urls:  ["%router.request_context.scheme%://%router.request_context.host%"]
    templating:
        engines:    ['twig']
    default_locale:  "%locale%"
    session:
        handler_id: session.handler.pdo
        save_path: "%kernel.root_dir%/sessions"
    fragments:       ~

services:
    pdo:
        class: PDO
        arguments:
            - 'mysql:host=%database_host%;port=%database_port%;dbname=%database_name%'
            - '%database_user%'
            - '%database_password%'
        calls:
            - [ setAttribute, [3, 2] ] # \PDO::ATTR_ERRMODE, \PDO::ERRMODE_EXCEPTION

    session.handler.pdo:
        class:     Symfony\Component\HttpFoundation\Session\Storage\Handler\PdoSessionHandler
        arguments: [ '@pdo', { lock_mode: 0 } ]

# Twig Configuration
twig:
    debug:            "%kernel.debug%"
    strict_variables: "%kernel.debug%"
    globals:
        ga_tracking_id: "%ga_tracking_id%"
        stripe_publishable_key: "%stripe_publishable_key%"
        websocket_uri: "%websocket_uri%"

# Assetic Configuration
assetic:
    debug:          "%kernel.debug%"
    use_controller: false
    bundles:        [ LadbCoreBundle, FOSUserBundle, TwigBundle ]
    #java: /usr/bin/java
    filters:
        less:
            node: "%node%"
            node_paths: "%node_paths%"
            apply_to: \.less$
        closure:
            jar: "%kernel.root_dir%/Resources/java/closure-compiler-v20180101.jar"
        yui_css:
            jar: "%kernel.root_dir%/Resources/java/yuicompressor-2.4.7.jar"

# Doctrine Configuration
doctrine:
    dbal:
        driver:   "%database_driver%"
        host:     "%database_host%"
        port:     "%database_port%"
        dbname:   "%database_name%"
        user:     "%database_user%"
        password: "%database_password%"
        charset:  UTF8

    orm:
        auto_generate_proxy_classes: "%kernel.debug%"
        auto_mapping: true
        mappings:
            gedmo_loggable:
                type: annotation
                prefix: Gedmo\Loggable\Entity
                dir: "%kernel.root_dir%/../vendor/gedmo/doctrine-extensions/lib/Gedmo/Loggable/Entity"
                alias: GedmoLoggable # this one is optional and will default to the name set for the mapping
                is_bundle: false
            gedmo_tree:
                type: annotation
                prefix: Gedmo\Tree\Entity
                dir: "%kernel.root_dir%/../vendor/gedmo/doctrine-extensions/lib/Gedmo/Tree/Entity"
                alias: GedmoTree # this one is optional and will default to the name set for the mapping
                is_bundle: false
        filters:
            softdeleteable:
                class: Gedmo\SoftDeleteable\Filter\SoftDeleteableFilter
                enabled: true
        dql:
            string_functions:
                GROUP_CONCAT: Ladb\CoreBundle\DoctrineExtensions\Query\Mysql\GroupConcat
            numeric_functions:
                Rand: Ladb\CoreBundle\DoctrineExtensions\Query\Mysql\Rand

# Swiftmailer Configuration
swiftmailer:
    transport: "%mailer_transport%"
    host:      "%mailer_host%"
    username:  "%mailer_user%"
    password:  "%mailer_password%"
    spool:
        type: file
        path: "%kernel.root_dir%/spool"

# StofDoctrineExtensions
stof_doctrine_extensions:
    default_locale: "%locale%"

    # Only used if you activated the Uploadable extension
    uploadable:
        # Default file path: This is one of the three ways you can configure the path for the Uploadable extension
        default_file_path:       "%kernel.root_dir%/../web/uploads"

        # Mime type guesser class: Optional. By default, we provide an adapter for the one present in the HttpFoundation component of Symfony
        mime_type_guesser_class: Stof\DoctrineExtensionsBundle\Uploadable\MimeTypeGuesserAdapter

        # Default file info class implementing FileInfoInterface: Optional. By default we provide a class which is prepared to receive an UploadedFile instance.
        default_file_info_class: Stof\DoctrineExtensionsBundle\Uploadable\UploadedFileInfo

        validate_writable_directory: true # Fix issue https://github.com/stof/StofDoctrineExtensionsBundle/pull/187
    orm:
        default:
            loggable: true
            sluggable: true
            timestampable: true
            softdeleteable: true

# FOSUserBundle
fos_user:
    db_driver: orm
    firewall_name: main
    user_class: Ladb\CoreBundle\Entity\Core\User
    use_listener: false
    from_email:
        address:        noreply@lairdubois.fr
        sender_name:    L'Air du Bois
    registration:
        confirmation:
            enabled:    false

# LiipImagineBundle
liip_imagine:

    resolvers:
        default:
            web_path:
                web_root: "%kernel.root_dir%/../web"
                cache_prefix: media/cache

    loaders:
        default:
            filesystem:
                data_root: "%kernel.root_dir%/../uploads"

    driver:               imagick
    cache:                default
    data_loader:          default
    default_image:        null
    controller:
        filter_action:         liip_imagine.controller:filterAction
        filter_runtime_action: liip_imagine.controller:filterRuntimeAction

    filter_sets:
        cache: ~

        # Outbound

        32x32o:
            filters:
                thumbnail: { size: [32, 32], mode: outbound }
            post_processors:
                ladb_imageoptimizer: {}
        50x50o: # Spotlight avatar
            filters:
                thumbnail: { size: [50, 50], mode: outbound }
            post_processors:
                ladb_imageoptimizer: {}
        64x64o:
            filters:
                thumbnail: { size: [64, 64], mode: outbound }
            post_processors:
                ladb_imageoptimizer: {}
        80x60o: # Find linkedTo
            filters:
                thumbnail: { size: [80, 60], mode: outbound }
            post_processors:
                ladb_imageoptimizer: {}
        128x128o:
            filters:
                thumbnail: { size: [128, 128], mode: outbound }
            post_processors:
                ladb_imageoptimizer: {}
        126x170o: # Wood (showcase small)
            filters:
                thumbnail: { size: [126, 170], mode: outbound }
            post_processors:
                ladb_imageoptimizer: {}
        180x180o: # Block gallery (small)
            filters:
                upscale: { min: [180, 180] }
                thumbnail: { size: [180, 180], mode: outbound }
            post_processors:
                ladb_imageoptimizer: {}
        282x280o: # Wood (showcase wide + cards + list thumbnail)
            filters:
                upscale: { min: [282, 280] }
                thumbnail: { size: [282, 280], mode: outbound }
            post_processors:
                ladb_imageoptimizer: {}
        282x200o: # Provider (showcase wide)
            filters:
                upscale: { min: [282, 200] }
                thumbnail: { size: [282, 200], mode: outbound }
            post_processors:
                ladb_imageoptimizer: {}
        400x400o: # Page image
            filters:
                thumbnail: { size: [400, 400], mode: outbound }
            post_processors:
                ladb_imageoptimizer: {}
        470x275o: # Page video thumbnail
            filters:
                thumbnail: { size: [470, 275], mode: outbound }
            post_processors:
                ladb_imageoptimizer: {}
        505x180o: # Banner
            filters:
                thumbnail: { size: [505, 180], mode: outbound }
            post_processors:
                ladb_imageoptimizer: {}
        594x294o: # Blog main picture + Feed
            filters:
                thumbnail: { size: [594, 294], mode: outbound, allow_upscale: true }
            post_processors:
                ladb_imageoptimizer: {}
        600x450o: # Block gallery (large)
            filters:
                upscale: { min: [600, 450] }
                thumbnail: { size: [600, 450], mode: outbound, allow_upscale: true }
            post_processors:
                ladb_imageoptimizer: {}
        800x350o: # Spotlight
            filters:
                thumbnail: { size: [800, 350], mode: outbound }
            post_processors:
                ladb_imageoptimizer: {}

        # Inset

        64x64i:
            filters:
                thumbnail: { size: [64, 64], mode: inset }
            post_processors:
                ladb_imageoptimizer: {}
        240x300i:
            filters:
                thumbnail: { size: [240, 300], mode: inset }
            post_processors:
                ladb_imageoptimizer: {}
        300x300i: # Picture form
            filters:
                thumbnail: { size: [300, 300], mode: inset }
            post_processors:
                ladb_imageoptimizer: {}
        300x550i: # list thumbnail
            filters:
                thumbnail: { size: [300, 550], mode: inset }
            post_processors:
                ladb_imageoptimizer: {}
        600x600i: # Showcase & Share
            filters:
                thumbnail: { size: [600, 600], mode: inset }
            post_processors:
                ladb_imageoptimizer: {}
        800x800i: # Spotlight
            filters:
                thumbnail: { size: [800, 800], mode: inset }
            post_processors:
                ladb_imageoptimizer: {}
        1024x1024i: # Full gallery picture
            filters:
                thumbnail: { size: [1024, 1024], mode: inset }
            post_processors:
                ladb_imageoptimizer: {}

        # Crop

        600x450c: # Workflow (showcase)
            filters:
                crop: { size: [600, 450], start: [0, 1] }
            post_processors:
                ladb_imageoptimizer: {}

        # Widen

        564w: # Strip
            filters:
                relative_resize: { widen: 564 }
            post_processors:
                ladb_imageoptimizer: {}
        598w: # Sticker
            filters:
                relative_resize: { widen: 598 }
            post_processors:
                ladb_imageoptimizer: {}

# FOSElasticaBundle
fos_elastica:
    clients:
        default: { host: "%elasticsearch_host%", port: "%elasticsearch_port%" }
    indexes:
        ladb:
            client: default
            settings:
                index:
                    analysis:
                        analyzer:
                            title_analyzer:
                                type: custom
                                tokenizer: standard
                                filter : [lowercase, fr_stemmer, asciifolding, fr_elision]
                            name_analyzer:
                                type: custom
                                tokenizer: standard
                                filter : [lowercase, fr_stemmer, asciifolding, fr_elision]
                            body_analyzer:
                                type: custom
                                tokenizer: standard
                                filter : [lowercase, fr_stemmer, fr_stop, asciifolding, fr_elision]
                            exact_lowercase_analyzer:
                                type: custom
                                tokenizer: keyword
                                filter : [lowercase, asciifolding]
                            ngram_analyzer:
                                type: custom
                                tokenizer: standard
                                filter : [lowercase, asciifolding, my_ngram]
                        filter:
                            fr_stop:
                                type: stop
                                stopwords: _french_
                            fr_stemmer:
                                type: stemmer
                                name: french
                            fr_elision:
                                type: elision
                                articles: [l, m, t, qu, n, s, j, d]
                            my_ngram:
                                type: nGram
                                min_gram: 3
                                max_gram: 5
            types:
                core_user:
                    properties:
                        displayname: { type: text, boost: 2, analyzer: name_analyzer }
                        fullname: { type: text, boost: 1, analyzer: name_analyzer }
                        username: { analyzer: name_analyzer }
                        createdAt: { type: date }
                        accountType: { type: short }
                        location:
                        geoPoint: { type: geo_point }
                        meta:
                            type: "object"
                            properties:
                                followerCount: { type: integer }
                                recievedLikeCount: { type: integer }
                                skills:
                                    type: "object"
                                    properties:
                                        label:
                    persistence:
                        driver: orm
                        model: Ladb\CoreBundle\Entity\Core\User
                        provider:
                            query_builder_method: "createIsEnabledQueryBuilder"
                        listener:
                            update: false
                core_tip:
                    properties:
                        title: { type: text, boost: 3, analyzer: title_analyzer }
                        body: { analyzer: body_analyzer }
                        changedAt: { type: date }
                        viewCount: { type: integer }
                    persistence:
                        driver: orm
                        model: Ladb\CoreBundle\Entity\Core\Tip
                        provider: ~
                        listener:
                            update: false
                wonder_creation:
                    properties:
                        visibility: { type: integer }
                        title: { type: text, boost: 3, analyzer: title_analyzer }
                        body: { analyzer: body_analyzer }
                        changedAt: { type: date }
                        viewCount: { type: integer }
                        likeCount: { type: integer }
                        commentCount: { type: integer }
                        bodyBlockVideoCount: { type: integer }
                        questionCount: { type: integer }
                        planCount: { type: integer }
                        howtoCount: { type: integer }
                        workflowCount: { type: integer }
                        providerCount: { type: integer }
                        schoolCount: { type: integer }
                        inspirationCount: { type: integer }
                        reboundCount: { type: integer }
                        user:
                            type: "object"
                            properties:
                                username: { analyzer: name_analyzer }
                                displayname: { analyzer: name_analyzer }
                                fullname: { analyzer: name_analyzer }
                        tags:
                            type: "object"
                            properties:
                                label: { type: text, boost: 2 }
                        woods:
                            type: "object"
                            properties:
                                label: { analyzer: body_analyzer }
                        tools:
                            type: "object"
                            properties:
                                label: { analyzer: body_analyzer }
                        finishes:
                            type: "object"
                            properties:
                                label: { analyzer: body_analyzer }
                        license:
                            type: "object"
                            properties:
                                strippedname:
                    persistence:
                        driver: orm
                        model: Ladb\CoreBundle\Entity\Wonder\Creation
                        provider: ~
                        listener:
                            insert: false
                            update: false
                            delete: false
                wonder_workshop:
                    properties:
                        visibility: { type: integer }
                        title: { type: text, boost: 3, analyzer: title_analyzer }
                        body: { analyzer: body_analyzer }
                        changedAt: { type: date }
                        area: { type: integer }
                        geoPoint: { type: geo_point }
                        viewCount: { type: integer }
                        likeCount: { type: integer }
                        commentCount: { type: integer }
                        bodyBlockVideoCount: { type: integer }
                        planCount: { type: integer }
                        howtoCount: { type: integer }
                        workflowCount: { type: integer }
                        user:
                            type: "object"
                            properties:
                                username: { analyzer: name_analyzer }
                                displayname: { analyzer: name_analyzer }
                                fullname: { analyzer: name_analyzer }
                        tags:
                            type: "object"
                            properties:
                                label: { type: text, boost: 2 }
                        license:
                            type: "object"
                            properties:
                                strippedname:
                    persistence:
                        driver: orm
                        model: Ladb\CoreBundle\Entity\Wonder\Workshop
                        provider: ~
                        listener:
                            insert: false
                            update: false
                            delete: false
                wonder_plan:
                    properties:
                        visibility: { type: integer }
                        title: { type: text, boost: 3, analyzer: title_analyzer }
                        body: { analyzer: body_analyzer }
                        changedAt: { type: date }
                        viewCount: { type: integer }
                        likeCount: { type: integer }
                        commentCount: { type: integer }
                        downloadCount: { type: integer }
                        questionCount: { type: integer }
                        creationCount: { type: integer }
                        workshopCount: { type: integer }
                        howtoCount: { type: integer }
                        workflowCount: { type: integer }
                        schoolCount: { type: integer }
                        inspirationCount: { type: integer }
                        reboundCount: { type: integer }
                        kinds:
                            type: "integer"
                        resources:
                            type: "object"
                            properties:
                                fileExtension: { type: string }
                        user:
                            type: "object"
                            properties:
                                username: { analyzer: name_analyzer }
                                displayname: { analyzer: name_analyzer }
                                fullname: { analyzer: name_analyzer }
                        tags:
                            type: "object"
                            properties:
                                label: { type: text, boost: 2 }
                        license:
                            type: "object"
                            properties:
                                strippedname:
                    persistence:
                        driver: orm
                        model: Ladb\CoreBundle\Entity\Wonder\Plan
                        provider: ~
                        listener:
                            insert: false
                            update: false
                            delete: false
                qa_question:
                    properties:
                        visibility: { type: integer }
                        title: { type: text, boost: 3, analyzer: title_analyzer }
                        body: { analyzer: body_analyzer }
                        changedAt: { type: date }
                        viewCount: { type: integer }
                        likeCount: { type: integer }
                        answerCount: { type: integer }
                        positiveAnswerCount: { type: integer }
                        nullAnswerCount: { type: integer }
                        undeterminedAnswerCount: { type: integer }
                        negativeAnswerCount: { type: integer }
                        creationCount: { type: integer }
                        planCount: { type: integer }
                        howtoCount: { type: integer }
                        user:
                            type: "object"
                            properties:
                                username: { analyzer: name_analyzer }
                                displayname: { analyzer: name_analyzer }
                                fullname: { analyzer: name_analyzer }
                        answers:
                            type: "object"
                            properties:
                                body: { analyzer: body_analyzer }
                        bestAnswer:
                            type: "object"
                            properties:
                                body: { analyzer: body_analyzer }
                        tags:
                            type: "object"
                            properties:
                                label: { type: text, boost: 2 }
                    persistence:
                        driver: orm
                        model: Ladb\CoreBundle\Entity\Qa\Question
                        provider: ~
                        listener:
                            insert: false
                            update: false
                            delete: false
                howto_howto:
                    properties:
                        visibility: { type: integer }
                        title: { type: text, boost: 3, analyzer: title_analyzer }
                        changedAt: { type: date }
                        viewCount: { type: integer }
                        likeCount: { type: integer }
                        commentCount: { type: integer }
                        bodyBlockVideoCount: { type: integer }
                        questionCount: { type: integer }
                        creationCount: { type: integer }
                        planCount: { type: integer }
                        workflowCount: { type: integer }
                        workshopCount: { type: integer }
                        providerCount: { type: integer }
                        schoolCount: { type: integer }
                        kind: { type: short }
                        isWorkInProgress: { type: boolean }
                        articles:
                            type: "object"
                            properties:
                                title: { type: text, boost: 3, analyzer: title_analyzer }
                                body: { analyzer: body_analyzer }
                        user:
                            type: "object"
                            properties:
                                username: { analyzer: name_analyzer }
                                displayname: { analyzer: name_analyzer }
                                fullname: { analyzer: name_analyzer }
                        tags:
                            type: "object"
                            properties:
                                label: { type: text, boost: 2 }
                        license:
                            type: "object"
                            properties:
                                strippedname:
                    persistence:
                        driver: orm
                        model: Ladb\CoreBundle\Entity\Howto\Howto
                        provider: ~
                        listener:
                            insert: false
                            update: false
                            delete: false
                find_find:
                    properties:
                        visibility: { type: integer }
                        title: { type: text, boost: 3, analyzer: title_analyzer }
                        body: { analyzer: body_analyzer }
                        changedAt: { type: date }
                        viewCount: { type: integer }
                        likeCount: { type: integer }
                        commentCount: { type: integer }
                        kind: { type: short }
                        user:
                            type: "object"
                            properties:
                                username: { analyzer: name_analyzer }
                                displayname: { analyzer: name_analyzer }
                                fullname: { analyzer: name_analyzer }
                        tags:
                            type: "object"
                            properties:
                                label: { type: text, boost: 2 }
                    persistence:
                        driver: orm
                        model: Ladb\CoreBundle\Entity\Find\Find
                        provider: ~
                        listener:
                            insert: false
                            update: false
                            delete: false
                workflow_workflow:
                    properties:
                        visibility: { type: integer }
                        title: { type: text, boost: 3, analyzer: title_analyzer }
                        body: { analyzer: body_analyzer }
                        changedAt: { type: date }
                        viewCount: { type: integer }
                        likeCount: { type: integer }
                        commentCount: { type: integer }
                        copyCount: { type: integer }
                        creationCount: { type: integer }
                        planCount: { type: integer }
                        howtoCount: { type: integer }
                        workshopCount: { type: integer }
                        user:
                            type: "object"
                            properties:
                                username: { analyzer: name_analyzer }
                                displayname: { analyzer: name_analyzer }
                                fullname: { analyzer: name_analyzer }
                        tags:
                            type: "object"
                            properties:
                                label: { type: text, boost: 2 }
                    persistence:
                        driver: orm
                        model: Ladb\CoreBundle\Entity\Workflow\Workflow
                        provider: ~
                        listener:
                            insert: false
                            update: false
                            delete: false
                collection_collection:
                    properties:
                        visibility: { type: integer }
                        title: { type: text, boost: 3, analyzer: title_analyzer }
                        body: { analyzer: body_analyzer }
                        changedAt: { type: date }
                        viewCount: { type: integer }
                        likeCount: { type: integer }
                        commentCount: { type: integer }
                        entryCount: { type: integer }
                        user:
                            type: "object"
                            properties:
                                username: { analyzer: name_analyzer }
                                displayname: { analyzer: name_analyzer }
                                fullname: { analyzer: name_analyzer }
                        tags:
                            type: "object"
                            properties:
                                label: { type: text, boost: 2 }
                    persistence:
                        driver: orm
                        model: Ladb\CoreBundle\Entity\Collection\Collection
                        provider: ~
                        listener:
                            insert: false
                            update: false
                            delete: false
                promotion_graphic:
                    properties:
                        visibility: { type: integer }
                        title: { type: text, boost: 3, analyzer: title_analyzer }
                        body: { analyzer: body_analyzer }
                        changedAt: { type: date }
                        viewCount: { type: integer }
                        likeCount: { type: integer }
                        commentCount: { type: integer }
                        user:
                            type: "object"
                            properties:
                                username: { analyzer: name_analyzer }
                                displayname: { analyzer: name_analyzer }
                                fullname: { analyzer: name_analyzer }
                        tags:
                            type: "object"
                            properties:
                                label: { type: text, boost: 2 }
                    persistence:
                        driver: orm
                        model: Ladb\CoreBundle\Entity\Promotion\Graphic
                        provider: ~
                        listener:
                            insert: false
                            update: false
                            delete: false
                blog_post:
                    properties:
                        visibility: { type: integer }
                        title: { type: text, boost: 3, analyzer: title_analyzer }
                        body: { analyzer: body_analyzer }
                        changedAt: { type: date }
                        viewCount: { type: integer }
                        likeCount: { type: integer }
                        commentCount: { type: integer }
                        user:
                            type: "object"
                            properties:
                                username: { analyzer: name_analyzer }
                                displayname: { analyzer: name_analyzer }
                                fullname: { analyzer: name_analyzer }
                        tags:
                            type: "object"
                            properties:
                                label: { type: text, boost: 2 }
                    persistence:
                        driver: orm
                        model: Ladb\CoreBundle\Entity\Blog\Post
                        provider: ~
                        listener:
                            insert: false
                            update: false
                            delete: false
                faq_question:
                    properties:
                        visibility: { type: integer }
                        title: { type: text, boost: 3, analyzer: title_analyzer }
                        body: { analyzer: body_analyzer }
                        changedAt: { type: date }
                        viewCount: { type: integer }
                        likeCount: { type: integer }
                        commentCount: { type: integer }
                        weight: { type: integer }
                        user:
                            type: "object"
                            properties:
                                username: { analyzer: name_analyzer }
                                displayname: { analyzer: name_analyzer }
                                fullname: { analyzer: name_analyzer }
                        tags:
                            type: "object"
                            properties:
                                label: { type: text, boost: 2 }
                    persistence:
                        driver: orm
                        model: Ladb\CoreBundle\Entity\Faq\Question
                        provider: ~
                        listener:
                            insert: false
                            update: false
                            delete: false
                offer_offer:
                    properties:
                        visibility: { type: integer }
                        title: { type: text, boost: 3, analyzer: title_analyzer }
                        body: { analyzer: body_analyzer }
                        changedAt: { type: date }
                        kind: { type: short }
                        category: { type: integer }
                        rawPrice: { type: float }
                        geoPoint: { type: geo_point }
                        viewCount: { type: integer }
                        likeCount: { type: integer }
                        commentCount: { type: integer }
                        user:
                            type: "object"
                            properties:
                                username: { analyzer: name_analyzer }
                                displayname: { analyzer: name_analyzer }
                                fullname: { analyzer: name_analyzer }
                        tags:
                            type: "object"
                            properties:
                                label: { type: text, boost: 2 }
                    persistence:
                        driver: orm
                        model: Ladb\CoreBundle\Entity\Offer\Offer
                        provider: ~
                        listener:
                            insert: false
                            update: false
                            delete: false
                knowledge_wood:
                    properties:
                        titleWorkaround: { type: keyword }
                        title: { type: text, boost: 3, analyzer: title_analyzer }
                        name: { type: text, boost: 3, analyzer: name_analyzer }
                        nameRejected: { type: boolean }
                        grainRejected: { type: boolean }
                        scientificname: { analyzer: name_analyzer }
                        englishname: { analyzer: name_analyzer }
                        density: { type: integer }
                        origin: { analyzer: name_analyzer }
                        utilization: { analyzer: name_analyzer }
                        changedAt: { type: date }
                        viewCount: { type: integer }
                        likeCount: { type: integer }
                        commentCount: { type: integer }
                    persistence:
                        driver: orm
                        model: Ladb\CoreBundle\Entity\Knowledge\Wood
                        provider: ~
                        listener:
                            insert: false
                            update: false
                            delete: false
                knowledge_provider:
                    properties:
                        sign: { type: text, boost: 2, analyzer: name_analyzer }
                        signRejected: { type: boolean }
                        brand: { type: text, analyzer: exact_lowercase_analyzer }
                        address: { analyzer: body_analyzer }
                        geographicalAreas: { analyzer: body_analyzer }
                        description: { analyzer: body_analyzer }
                        products: { analyzer: body_analyzer }
                        services: { analyzer: body_analyzer }
                        woodsWorkaround: { analyzer: body_analyzer }
                        geoPoint: { type: geo_point }
                        changedAt: { type: date }
                        viewCount: { type: integer }
                        likeCount: { type: integer }
                        commentCount: { type: integer }
                        reviewCount: { type: integer }
                        creationCount: { type: integer }
                        howtoCount: { type: integer }
                        averageRating: { type: float }
                        inStoreSelling: { type: boolean }
                        mailOrderSelling: { type: boolean }
                        saleToIndividuals: { type: boolean }
                    persistence:
                        driver: orm
                        model: Ladb\CoreBundle\Entity\Knowledge\Provider
                        provider: ~
                        listener:
                            insert: false
                            update: false
                            delete: false
                knowledge_school:
                    properties:
                        name: { type: text, boost: 3, analyzer: name_analyzer }
                        nameRejected: { type: boolean }
                        diplomas: { type: text, analyzer: name_analyzer }
                        trainingTypes: { analyzer: body_analyzer }
                        address: { analyzer: body_analyzer }
                        geographicalAreas: { analyzer: body_analyzer }
                        description: { analyzer: body_analyzer }
                        geoPoint: { type: geo_point }
                        changedAt: { type: date }
                        viewCount: { type: integer }
                        likeCount: { type: integer }
                        commentCount: { type: integer }
                        testimonialCount: { type: integer }
                        creationCount: { type: integer }
                        planCount: { type: integer }
                        howtoCount: { type: integer }
                    persistence:
                        driver: orm
                        model: Ladb\CoreBundle\Entity\Knowledge\School
                        provider: ~
                        listener:
                            insert: false
                            update: false
                            delete: false
                knowledge_book:
                    properties:
                        title: { type: text, boost: 3, analyzer: title_analyzer }
                        titleRejected: { type: boolean }
                        coverRejected: { type: boolean }
                        authors: { analyzer: name_analyzer }
                        editor: { analyzer: name_analyzer }
                        collection: { type: text, analyzer: name_analyzer }
                        publicDomain: { type: boolean }
                        subjects: { analyzer: body_analyzer }
                        summary: { analyzer: body_analyzer }
                        toc: { analyzer: body_analyzer }
                        language: { type: text, analyzer: name_analyzer }
                        changedAt: { type: date }
                        viewCount: { type: integer }
                        likeCount: { type: integer }
                        commentCount: { type: integer }
                        reviewCount: { type: integer }
                        averageRating: { type: float }
                    persistence:
                        driver: orm
                        model: Ladb\CoreBundle\Entity\Knowledge\Book
                        provider: ~
                        listener:
                            insert: false
                            update: false
                            delete: false
                knowledge_software:
                    properties:
                        name: { type: text, boost: 3, analyzer: name_analyzer }
                        identityRejected: { type: boolean }
                        isAddOn: { type: boolean }
                        hostSoftwareName: { type: string, analyzer: exact_lowercase_analyzer }
                        iconRejected: { type: boolean }
                        authors: { analyzer: name_analyzer }
                        publisher: { analyzer: name_analyzer }
                        openSource: { type: boolean }
                        operatingSystems: { type: text, analyzer: name_analyzer }
                        pricings: { type: text, analyzer: name_analyzer }
                        features: { type: text, analyzer: name_analyzer }
                        languages: { type: text, analyzer: name_analyzer }
                        supportedFiles: { type: text }
                        changedAt: { type: date }
                        viewCount: { type: integer }
                        likeCount: { type: integer }
                        commentCount: { type: integer }
                        reviewCount: { type: integer }
                        averageRating: { type: float }
                    persistence:
                        driver: orm
                        model: Ladb\CoreBundle\Entity\Knowledge\Software
                        provider: ~
                        listener:
                            insert: false
                            update: false
                            delete: false
                core_tag:
                    properties:
                        label: { analyzer: ngram_analyzer }
                    persistence:
                        driver: orm
                        model: Ladb\CoreBundle\Entity\Core\Tag
                        provider: ~
                        listener: ~
                input_skill:
                    properties:
                        label: { analyzer: ngram_analyzer }
                    persistence:
                        driver: orm
                        model: Ladb\CoreBundle\Entity\Input\Skill
                        provider: ~
                        listener: ~
                input_wood:
                    properties:
                        label: { analyzer: ngram_analyzer }
                    persistence:
                        driver: orm
                        model: Ladb\CoreBundle\Entity\Input\Wood
                        provider: ~
                        listener: ~
                input_tool:
                    properties:
                        label: { analyzer: ngram_analyzer }
                    persistence:
                        driver: orm
                        model: Ladb\CoreBundle\Entity\Input\Tool
                        provider: ~
                        listener: ~
                input_finish:
                    properties:
                        label: { analyzer: ngram_analyzer }
                    persistence:
                        driver: orm
                        model: Ladb\CoreBundle\Entity\Input\Finish
                        provider: ~
                        listener: ~

# GosWebSocketBundle
gos_web_socket:
    shared_config: false
    client:
        firewall: main
        session_handler: '@session.handler.pdo'
    server:
        host: '%websocket_host%'
        port: '%websocket_port%'
        router:
            resources:
                - '@LadbCoreBundle/Resources/config/pubsub/routing.yml'
    pushers:
        wamp:
            host: '%websocket_host%'
            port: '%websocket_port%'

# OldSoundRabbitMqBundle
old_sound_rabbit_mq:
    connections:
        default:
            host:     "%rabbitmq_host%"
            port:     "%rabbitmq_port%"
            user:     "%rabbitmq_user%"
            password: "%rabbitmq_password%"
            vhost:    "%rabbitmq_vhost%"
            lazy:     false
    producers:
        view:
            connection: default
            exchange_options:
                name: 'view_exchange'
                type: topic
        webpush_notification:
            connection: default
            exchange_options:
                name: 'webpush_notification_exchange'
                type: topic
    consumers:
        view:
            connection: default
            exchange_options:
                name: 'view_exchange'
                type: topic
            queue_options:
                name: 'view_queue'
            callback: 'Ladb\CoreBundle\Consumer\ViewConsumer'
        webpush_notification:
            connection: default
            exchange_options:
                name: 'webpush_notification_exchange'
                type: topic
            queue_options:
                name: 'webpush_notification_queue'
            callback: 'Ladb\CoreBundle\Consumer\WebpushNotificationConsumer'

# BentoolsWebpushBundle
bentools_webpush:
    settings:
        public_key: '%bentools_webpush.public_key%'
        private_key: '%bentools_webpush.private_key%'
    associations:
        my_users:
            user_class: Ladb\CoreBundle\Entity\Core\User
            user_subscription_class: Ladb\CoreBundle\Entity\Webpush\UserSubscription
            manager: '@Ladb\CoreBundle\Manager\Webpush\UserSubscriptionManager'
        my_users_proxies:
            user_class: Proxies\__CG__\Ladb\CoreBundle\Entity\Core\User
            user_subscription_class: Ladb\CoreBundle\Entity\Webpush\UserSubscription
            manager: '@Ladb\CoreBundle\Manager\Webpush\UserSubscriptionManager'
